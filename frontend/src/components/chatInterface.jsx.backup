import React, { useState, useRef, useEffect, useMemo } from 'react';
import { Send, Plus, Search, Menu, X, Copy, Check, Sun, Moon, Paperclip, Code, FileText, File, Image, FileVideo, FileAudio, Settings, Trash2, RotateCcw } from 'lucide-react';

// íƒ€ì… ì •ì˜
const MessageRole = {
  USER: 'user',
  ASSISTANT: 'assistant'
};

// ìƒ˜í”Œ ëŒ€í™” ë°ì´í„° (ê²€ìƒ‰ì„ ìœ„í•´ ë©”ì‹œì§€ í¬í•¨)
const sampleConversations = [
  { 
    id: 1, 
    title: "React ì»´í¬ë„ŒíŠ¸ ìµœì í™”", 
    lastMessage: "useMemoì™€ useCallbackì˜ ì°¨ì´ì ì€...", 
    time: "2ë¶„ ì „",
    messages: [
      { id: 1, role: MessageRole.USER, content: "React ì•±ì´ ëŠë ¤ìš”. **useMemo**ì™€ **useCallback** ì–¸ì œ ì¨ì•¼ í•˜ë‚˜ìš”?" },
      { id: 2, role: MessageRole.ASSISTANT, content: "React ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ Hook ì‚¬ìš©ë²•ì„ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n## useMemo vs useCallback\n\n### useMemo\n- ê³„ì‚° ë¹„ìš©ì´ ë†’ì€ ê°’ì„ ë©”ëª¨ì´ì œì´ì…˜\n- ì˜ì¡´ì„± ë°°ì—´ì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ì¬ê³„ì‚°\n\n```javascript\nconst expensiveValue = useMemo(() => {\n  return computeExpensiveValue(a, b);\n}, [a, b]);\n```\n\n### useCallback\n- í•¨ìˆ˜ë¥¼ ë©”ëª¨ì´ì œì´ì…˜\n- ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì½œë°±ì„ ì „ë‹¬í•  ë•Œ ìœ ìš©" }
    ]
  },
  { 
    id: 2, 
    title: "Python ë°ì´í„° ë¶„ì„", 
    lastMessage: "Pandas DataFrame ë³‘í•© ë°©ë²•", 
    time: "1ì‹œê°„ ì „",
    messages: [
      { id: 1, role: MessageRole.USER, content: "**Pandas**ë¡œ CSV íŒŒì¼ ì½ê³  ë°ì´í„° ë³‘í•©í•˜ëŠ” ë°©ë²• ì•Œë ¤ì£¼ì„¸ìš”" },
      { id: 2, role: MessageRole.ASSISTANT, content: "Pandasë¥¼ ì‚¬ìš©í•œ ë°ì´í„° ë³‘í•© ë°©ë²•ì…ë‹ˆë‹¤:\n\n```python\nimport pandas as pd\n\n# CSV íŒŒì¼ ì½ê¸°\ndf1 = pd.read_csv('file1.csv')\ndf2 = pd.read_csv('file2.csv')\n\n# ë³‘í•©í•˜ê¸°\nmerged = pd.merge(df1, df2, on='key_column')\n```" }
    ]
  },
  { 
    id: 3, 
    title: "API ì„¤ê³„ íŒ¨í„´", 
    lastMessage: "RESTful vs GraphQL ë¹„êµ", 
    time: "ì–´ì œ",
    messages: [
      { id: 1, role: MessageRole.USER, content: "**RESTful API**ì™€ **GraphQL** ì¤‘ ë­ê°€ ë” ì¢‹ì•„ìš”?" },
      { id: 2, role: MessageRole.ASSISTANT, content: "ê°ê°ì˜ ì¥ë‹¨ì ì„ ë¹„êµí•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤:\n\n## REST\n- ê°„ë‹¨í•˜ê³  ì§ê´€ì \n- HTTP ë©”ì„œë“œ í™œìš©\n- ìºì‹± ìš©ì´\n\n## GraphQL\n- í•„ìš”í•œ ë°ì´í„°ë§Œ ìš”ì²­\n- ë‹¨ì¼ ì—”ë“œí¬ì¸íŠ¸\n- ì‹¤ì‹œê°„ êµ¬ë… ì§€ì›" }
    ]
  },
];

// ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ì„ ìœ„í•œ ì»´í¬ë„ŒíŠ¸
const MarkdownRenderer = ({ content, darkMode, searchQuery = '', isSearching = false }) => {
  // ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ…
  const highlightSearchQuery = (text) => {
    if (!searchQuery || !isSearching) return text;

    const regex = new RegExp(`(${searchQuery})`, 'gi');
    return text.replace(regex, '<mark class="search-highlight">$1</mark>');
  };

  const renderMarkdown = (text) => {
    // ë¨¼ì € ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ… ì ìš©
    text = highlightSearchQuery(text);

    // ì½”ë“œ ë¸”ë¡ ì²˜ë¦¬ (```ë¡œ ê°ì‹¸ì§„ ë¶€ë¶„)
    text = text.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
      return `<pre class="markdown-code-block ${darkMode ? 'dark' : 'light'}"><code class="language-${lang || 'text'}">${code.trim()}</code></pre>`;
    });

    // ì¸ë¼ì¸ ì½”ë“œ ì²˜ë¦¬
    text = text.replace(/`([^`]+)`/g, '<code class="markdown-inline-code">$1</code>');

    // êµµì€ ê¸€ì”¨
    text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');

    // ê¸°ìš¸ì„ì²´
    text = text.replace(/\*([^*]+)\*/g, '<em>$1</em>');

    // ì œëª© ì²˜ë¦¬
    text = text.replace(/^### (.*$)/gim, '<h3 class="markdown-h3">$1</h3>');
    text = text.replace(/^## (.*$)/gim, '<h2 class="markdown-h2">$1</h2>');
    text = text.replace(/^# (.*$)/gim, '<h1 class="markdown-h1">$1</h1>');

    // ëª©ë¡ ì²˜ë¦¬
    text = text.replace(/^\- (.*$)/gim, '<li class="markdown-list-item">$1</li>');
    text = text.replace(/(<li class="markdown-list-item">.*<\/li>)/s, '<ul class="markdown-list">$1</ul>');

    // ìˆ«ì ëª©ë¡
    text = text.replace(/^\d+\. (.*$)/gim, '<li class="markdown-ordered-item">$1</li>');

    // ë§í¬ ì²˜ë¦¬
    text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" class="markdown-link" target="_blank" rel="noopener noreferrer">$1</a>');

    // ì¸ìš©êµ¬
    text = text.replace(/^> (.*$)/gim, '<blockquote class="markdown-quote">$1</blockquote>');

    // ì¤„ë°”ê¿ˆ ì²˜ë¦¬
    text = text.replace(/\n/g, '<br />');

    return text;
  };

  return (
    <div 
      className="markdown-content"
      dangerouslySetInnerHTML={{ __html: renderMarkdown(content) }}
    />
  );
};

const ChatInterface = () => {
  const [conversations, setConversations] = useState(sampleConversations);
  const [activeConversation, setActiveConversation] = useState(1);
  const [messages, setMessages] = useState(sampleConversations[0].messages);
  const [inputValue, setInputValue] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const [sidebarOpen, setSidebarOpen] = useState(true);
  const [artifactOpen, setArtifactOpen] = useState(true);
  const [darkMode, setDarkMode] = useState(false);
  const [copiedId, setCopiedId] = useState(null);
  const [attachedFiles, setAttachedFiles] = useState([]);
  const [isDragging, setIsDragging] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [searchMode, setSearchMode] = useState('all'); // all, title, content
  const [isSearching, setIsSearching] = useState(false);
  const [showSettings, setShowSettings] = useState(false);
  const [fontSize, setFontSize] = useState('medium'); // small, medium, large
  const messagesEndRef = useRef(null);
  const textareaRef = useRef(null);
  const fileInputRef = useRef(null);

  // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
  useEffect(() => {
    try {
      if (typeof window !== 'undefined' && window.localStorage) {
        const savedSettings = localStorage.getItem('chatSettings');
        if (savedSettings) {
          const settings = JSON.parse(savedSettings);
          setDarkMode(settings.darkMode || false);
          setFontSize(settings.fontSize || 'medium');
        }
      }
    } catch (error) {
      console.log('localStorage not available');
    }
  }, []);

  // ì„¤ì • ì €ì¥
  useEffect(() => {
    try {
      if (typeof window !== 'undefined' && window.localStorage) {
        const settings = {
          darkMode,
          fontSize
        };
        localStorage.setItem('chatSettings', JSON.stringify(settings));
      }
    } catch (error) {
      console.log('localStorage not available');
    }
  }, [darkMode, fontSize]);

  // ê²€ìƒ‰ ìƒíƒœ ê´€ë¦¬
  useEffect(() => {
    setIsSearching(searchQuery.trim().length > 0);
  }, [searchQuery]);

  // ê²€ìƒ‰ ê²°ê³¼ í•„í„°ë§
  const filteredConversations = useMemo(() => {
    if (!searchQuery.trim()) {
      return conversations;
    }

    const query = searchQuery.toLowerCase();

    return conversations.filter(conv => {
      switch (searchMode) {
        case 'title':
          return conv.title.toLowerCase().includes(query);
        case 'content':
          return conv.messages && conv.messages.some(msg => 
            msg.content.toLowerCase().includes(query)
          );
        case 'all':
        default:
          return conv.title.toLowerCase().includes(query) ||
                 (conv.messages && conv.messages.some(msg => 
                   msg.content.toLowerCase().includes(query)
                 ));
      }
    });
  }, [searchQuery, searchMode, conversations]);

  // ëŒ€í™” ì „í™˜
  const switchConversation = (convId) => {
    const conv = conversations.find(c => c.id === convId);
    if (conv) {
      setActiveConversation(convId);
      setMessages(conv.messages || []);
      setSearchQuery(''); // ê²€ìƒ‰ ì´ˆê¸°í™”
    }
  };

  // ë©”ì‹œì§€ ìŠ¤í¬ë¡¤
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [messages]);

  // Textarea ìë™ ë†’ì´ ì¡°ì ˆ
  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = 'auto';
      textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';
    }
  }, [inputValue]);

  // íŒŒì¼ íƒ€ì…ì— ë”°ë¥¸ ì•„ì´ì½˜ ë°˜í™˜
  const getFileIcon = (type) => {
    if (type.startsWith('image/')) return Image;
    if (type.startsWith('video/')) return FileVideo;
    if (type.startsWith('audio/')) return FileAudio;
    if (type.includes('pdf')) return FileText;
    return File;
  };

  // íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
  const formatFileSize = (bytes) => {
    if (bytes < 1024) return bytes + ' B';
    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
    return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
  };

  // íŒŒì¼ ì„ íƒ í•¸ë“¤ëŸ¬
  const handleFileSelect = (e) => {
    const files = Array.from(e.target.files);
    const validFiles = files.filter(file => {
      // íŒŒì¼ í¬ê¸° ì œí•œ (10MB)
      if (file.size > 10 * 1024 * 1024) {
        alert(`${file.name}ì€(ëŠ”) 10MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.`);
        return false;
      }
      return true;
    });

    setAttachedFiles(prev => [...prev, ...validFiles.map(file => ({
      file,
      id: Date.now() + Math.random(),
      preview: file.type.startsWith('image/') ? URL.createObjectURL(file) : null
    }))]);
  };

  // íŒŒì¼ ì‚­ì œ
  const removeFile = (fileId) => {
    setAttachedFiles(prev => prev.filter(f => f.id !== fileId));
  };

  // ë“œë˜ê·¸ ì•¤ ë“œë¡­ í•¸ë“¤ëŸ¬
  const handleDragOver = (e) => {
    e.preventDefault();
    setIsDragging(true);
  };

  const handleDragLeave = (e) => {
    e.preventDefault();
    setIsDragging(false);
  };

  const handleDrop = (e) => {
    e.preventDefault();
    setIsDragging(false);

    const files = Array.from(e.dataTransfer.files);
    const validFiles = files.filter(file => file.size <= 10 * 1024 * 1024);

    setAttachedFiles(prev => [...prev, ...validFiles.map(file => ({
      file,
      id: Date.now() + Math.random(),
      preview: file.type.startsWith('image/') ? URL.createObjectURL(file) : null
    }))]);
  };

  // ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ… í•¨ìˆ˜
  const highlightText = (text, query, isDark) => {
    if (!query.trim()) return text;

    const parts = text.split(new RegExp(`(${query})`, 'gi'));
    return parts.map((part, index) => 
      part.toLowerCase() === query.toLowerCase() 
        ? <span key={index} className={`${isDark ? 'bg-yellow-600/30 text-yellow-300' : 'bg-yellow-300 text-gray-900'} px-0.5 rounded`}>{part}</span>
        : part
    );
  };

  // ë©”ì‹œì§€ ì „ì†¡
  const handleSend = () => {
    if (!inputValue.trim() && attachedFiles.length === 0) return;

    const userMessage = inputValue; // ê°’ ì €ì¥
    const newMessage = {
      id: messages.length + 1,
      role: MessageRole.USER,
      content: userMessage,
      files: attachedFiles.map(f => ({
        name: f.file.name,
        type: f.file.type,
        size: f.file.size,
        preview: f.preview
      }))
    };

    const updatedMessages = [...messages, newMessage];
    setMessages(updatedMessages);

    // í˜„ì¬ ëŒ€í™” ì—…ë°ì´íŠ¸
    setConversations(prev => prev.map(conv => 
      conv.id === activeConversation
        ? { ...conv, messages: updatedMessages, lastMessage: userMessage || "íŒŒì¼ ì „ì†¡", time: "ë°©ê¸ˆ" }
        : conv
    ));

    setInputValue('');
    setAttachedFiles([]);
    setIsTyping(true);

    // AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
    setTimeout(() => {
      const fileCount = newMessage.files.length;
      const fileInfo = fileCount > 0 ? `\n\nì²¨ë¶€í•˜ì‹  ${fileCount}ê°œì˜ íŒŒì¼ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.` : '';

      const aiResponse = {
        id: messages.length + 2,
        role: MessageRole.ASSISTANT,
        content: `ì œê°€ ë¶„ì„í•œ ë‚´ìš©ì„ **ë§ˆí¬ë‹¤ìš´ í˜•ì‹**ìœ¼ë¡œ ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.${fileInfo}

## Claude ìŠ¤íƒ€ì¼ UIì˜ íŠ¹ì§•

1. **ê¹”ë”í•œ ë””ìì¸**
   - ë¯¸ë‹ˆë©€í•œ ì¸í„°í˜ì´ìŠ¤
   - ì§ê´€ì ì¸ ë ˆì´ì•„ì›ƒ

2. **ì£¼ìš” ê¸°ëŠ¥**
   - \`ë§ˆí¬ë‹¤ìš´\` ë Œë”ë§ ì§€ì›
   - ì½”ë“œ í•˜ì´ë¼ì´íŒ…
   - ë‹¤í¬ëª¨ë“œ í† ê¸€
   - íŒŒì¼ ì—…ë¡œë“œ ì§€ì›
   - ëŒ€í™” ë‚´ìš© ê²€ìƒ‰

\`\`\`javascript
// ì˜ˆì œ ì½”ë“œ
const greeting = (name) => {
  return \`ì•ˆë…•í•˜ì„¸ìš”, \${name}ë‹˜!\`;
};
\`\`\`

> "ì‹¬í”Œí•œ ê²Œ ìµœê³ ì˜ ì†”ë£¨ì…˜ì´ì—ìš”" - Dr. Chen

ë” ìì„¸í•œ ì •ë³´ëŠ” [Claude ë¬¸ì„œ](https://docs.anthropic.com)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.`
      };

      const finalMessages = [...updatedMessages, aiResponse];
      setMessages(finalMessages);

      // AI ì‘ë‹µë„ ëŒ€í™”ì— ì €ì¥í•˜ê³ , ìƒˆ ëŒ€í™”ì¸ ê²½ìš° ì œëª© ì—…ë°ì´íŠ¸
      setConversations(prev => prev.map(conv => {
        if (conv.id === activeConversation) {
          const updatedConv = {
            ...conv,
            messages: finalMessages,
            lastMessage: "AI ì‘ë‹µ ì™„ë£Œ",
            time: "ë°©ê¸ˆ"
          };

          // ìƒˆ ëŒ€í™”ì¸ ê²½ìš° ì²« ë©”ì‹œì§€ ë‚´ìš©ìœ¼ë¡œ ì œëª© ì„¤ì •
          if (conv.title === "ìƒˆ ëŒ€í™”" && userMessage) {
            updatedConv.title = userMessage.slice(0, 30) + (userMessage.length > 30 ? "..." : "");
          }

          return updatedConv;
        }
        return conv;
      }));

      setIsTyping(false);
    }, 1500);
  };

  // ì½”ë“œ ë³µì‚¬
  const handleCopy = (text, messageId) => {
    navigator.clipboard.writeText(text);
    setCopiedId(messageId);
    setTimeout(() => setCopiedId(null), 2000);
  };

  // ìƒˆ ëŒ€í™” ì‹œì‘
  const startNewChat = () => {
    const newConv = {
      id: Date.now(), // ê³ ìœ  ID ìƒì„±
      title: "ìƒˆ ëŒ€í™”",
      lastMessage: "",
      time: "ë°©ê¸ˆ",
      messages: []
    };
    setConversations([newConv, ...conversations]);
    setActiveConversation(newConv.id);
    setMessages([]);
    setSearchQuery(''); // ê²€ìƒ‰ ì´ˆê¸°í™”
  };

  // ëŒ€í™” ì‚­ì œ í•¨ìˆ˜
  const deleteConversation = (convId) => {
    if (window.confirm('ì´ ëŒ€í™”ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      setConversations(prev => prev.filter(c => c.id !== convId));

      // ì‚­ì œí•œ ëŒ€í™”ê°€ í˜„ì¬ í™œì„± ëŒ€í™”ì¸ ê²½ìš°
      if (convId === activeConversation) {
        const remainingConvs = conversations.filter(c => c.id !== convId);
        if (remainingConvs.length > 0) {
          switchConversation(remainingConvs[0].id);
        } else {
          // ëŒ€í™”ê°€ ì—†ìœ¼ë©´ ìƒˆ ëŒ€í™” ì‹œì‘
          startNewChat();
        }
      }
    }
  };

  // ëª¨ë“  ëŒ€í™” ì‚­ì œ
  const deleteAllConversations = () => {
    if (window.confirm('ëª¨ë“  ëŒ€í™” ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
      setConversations([]);
      startNewChat();
    }
  };

  // ì„¤ì • ì´ˆê¸°í™”
  const resetSettings = () => {
    if (window.confirm('ëª¨ë“  ì„¤ì •ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
      setDarkMode(false);
      setFontSize('medium');
      localStorage.removeItem('chatSettings');
    }
  };

  // í°íŠ¸ í¬ê¸°ì— ë”°ë¥¸ í´ë˜ìŠ¤ ë°˜í™˜
  const getFontSizeClass = () => {
    switch(fontSize) {
      case 'small': return 'text-xs';
      case 'large': return 'text-base';
      default: return 'text-sm';
    }
  };

  // ì„¤ì • ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
  const SettingsModal = () => {
    if (!showSettings) return null;

    return (
      <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50" onClick={() => setShowSettings(false)}>
        <div 
          className={`w-full max-w-lg mx-4 rounded-lg shadow-xl ${darkMode ? 'bg-gray-800' : 'bg-white'}`}
          onClick={(e) => e.stopPropagation()}
        >
          {/* í—¤ë” */}
          <div className={`flex items-center justify-between p-6 border-b ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>
            <h2 className={`text-xl font-semibold flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-900'}`}>
              <Settings size={24} />
              ì„¤ì •
            </h2>
            <button
              onClick={() => setShowSettings(false)}
              className={`p-2 rounded-lg transition-colors ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
            >
              <X size={20} className={darkMode ? 'text-gray-400' : 'text-gray-500'} />
            </button>
          </div>

          {/* ì„¤ì • ë‚´ìš© */}
          <div className="p-6 space-y-6">
            {/* ì™¸ê´€ ì„¤ì • */}
            <div>
              <h3 className={`text-lg font-medium mb-4 ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                ğŸ¨ ì™¸ê´€ ì„¤ì •
              </h3>

              {/* ë‹¤í¬ëª¨ë“œ */}
              <div className="space-y-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>ë‹¤í¬ ëª¨ë“œ</p>
                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>ì–´ë‘ìš´ í…Œë§ˆë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤</p>
                  </div>
                  <button
                    onClick={() => setDarkMode(!darkMode)}
                    className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                      darkMode ? 'bg-blue-600' : 'bg-gray-200'
                    }`}
                  >
                    <span
                      className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                        darkMode ? 'translate-x-6' : 'translate-x-1'
                      }`}
                    />
                  </button>
                </div>

                {/* í°íŠ¸ í¬ê¸° */}
                <div>
                  <p className={`font-medium mb-2 ${darkMode ? 'text-white' : 'text-gray-900'}`}>í°íŠ¸ í¬ê¸°</p>
                  <div className="flex gap-2">
                    {['small', 'medium', 'large'].map((size) => (
                      <button
                        key={size}
                        onClick={() => setFontSize(size)}
                        className={`px-4 py-2 rounded-lg transition-colors ${
                          fontSize === size
                            ? darkMode ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white'
                            : darkMode ? 'bg-gray-700 text-gray-300' : 'bg-gray-100 text-gray-700'
                        }`}
                      >
                        {size === 'small' ? 'ì‘ê²Œ' : size === 'medium' ? 'ë³´í†µ' : 'í¬ê²Œ'}
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            </div>

            {/* ë°ì´í„° ê´€ë¦¬ */}
            <div>
              <h3 className={`text-lg font-medium mb-4 ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                ğŸ—‚ï¸ ë°ì´í„° ê´€ë¦¬
              </h3>

              <div className="space-y-3">
                {/* í˜„ì¬ ëŒ€í™” ì‚­ì œ */}
                <button
                  onClick={() => {
                    deleteConversation(activeConversation);
                    setShowSettings(false);
                  }}
                  className={`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${
                    darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-100 hover:bg-gray-200'
                  }`}
                >
                  <div className="flex items-center gap-3">
                    <Trash2 size={18} className="text-red-500" />
                    <span className={darkMode ? 'text-white' : 'text-gray-900'}>í˜„ì¬ ëŒ€í™” ì‚­ì œ</span>
                  </div>
                </button>

                {/* ëª¨ë“  ëŒ€í™” ì‚­ì œ */}
                <button
                  onClick={() => {
                    deleteAllConversations();
                    setShowSettings(false);
                  }}
                  className={`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${
                    darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-100 hover:bg-gray-200'
                  }`}
                >
                  <div className="flex items-center gap-3">
                    <Trash2 size={18} className="text-red-500" />
                    <span className={darkMode ? 'text-white' : 'text-gray-900'}>ëª¨ë“  ëŒ€í™” ì‚­ì œ</span>
                  </div>
                  <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>
                    {conversations.length}ê°œ
                  </span>
                </button>
              </div>
            </div>

            {/* ì´ˆê¸°í™” */}
            <div>
              <button
                onClick={() => {
                  resetSettings();
                  setShowSettings(false);
                }}
                className={`w-full flex items-center justify-center gap-2 p-3 rounded-lg border transition-colors ${
                  darkMode 
                    ? 'border-gray-600 text-gray-300 hover:bg-gray-700' 
                    : 'border-gray-300 text-gray-700 hover:bg-gray-50'
                }`}
              >
                <RotateCcw size={18} />
                <span>ëª¨ë“  ì„¤ì • ì´ˆê¸°í™”</span>
              </button>
            </div>
          </div>

          {/* í‘¸í„° */}
          <div className={`p-4 border-t ${darkMode ? 'border-gray-700' : 'border-gray-200'}`}>
            <p className={`text-center text-xs ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>
              ì„¤ì •ì€ ë¸Œë¼ìš°ì €ì— ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤
            </p>
          </div>
        </div>
      </div>
    );
  };

  // ë§ˆí¬ë‹¤ìš´ ìŠ¤íƒ€ì¼ ì •ì˜
  const markdownStyles = `
    .markdown-content {
      word-break: break-word;
    }

    .markdown-content strong {
      font-weight: 600;
    }

    .markdown-content em {
      font-style: italic;
    }

    .search-highlight {
      background-color: ${darkMode ? 'rgba(250, 204, 21, 0.3)' : 'rgba(250, 204, 21, 0.5)'};
      color: ${darkMode ? '#fbbf24' : '#92400e'};
      padding: 0.125rem 0.25rem;
      border-radius: 0.25rem;
      font-weight: 500;
    }

    .markdown-inline-code {
      background-color: ${darkMode ? 'rgba(75, 85, 99, 0.4)' : 'rgba(229, 231, 235, 1)'};
      color: ${darkMode ? '#f472b6' : '#e11d48'};
      padding: 0.125rem 0.375rem;
      border-radius: 0.25rem;
      font-family: monospace;
      font-size: 0.875em;
    }

    .markdown-code-block {
      background-color: ${darkMode ? '#1f2937' : '#1e293b'};
      color: ${darkMode ? '#e5e7eb' : '#f1f5f9'};
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      margin: 1rem 0;
      font-family: monospace;
      font-size: 0.875rem;
      line-height: 1.5;
    }

    .markdown-code-block code {
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    }

    .markdown-h1 {
      font-size: 1.5rem;
      font-weight: 700;
      margin: 1rem 0 0.5rem 0;
      color: ${darkMode ? '#f3f4f6' : '#111827'};
    }

    .markdown-h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0.875rem 0 0.5rem 0;
      color: ${darkMode ? '#f3f4f6' : '#111827'};
    }

    .markdown-h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 0.75rem 0 0.5rem 0;
      color: ${darkMode ? '#f3f4f6' : '#111827'};
    }

    .markdown-list {
      margin: 0.5rem 0;
      padding-left: 1.5rem;
      list-style-type: disc;
    }

    .markdown-list-item {
      margin: 0.25rem 0;
      list-style-type: disc;
    }

    .markdown-ordered-item {
      margin: 0.25rem 0;
      list-style-type: decimal;
      margin-left: 1.5rem;
    }

    .markdown-link {
      color: ${darkMode ? '#60a5fa' : '#2563eb'};
      text-decoration: underline;
      cursor: pointer;
    }

    .markdown-link:hover {
      color: ${darkMode ? '#93bbfc' : '#1d4ed8'};
    }

    .markdown-quote {
      border-left: 4px solid ${darkMode ? '#4b5563' : '#d1d5db'};
      padding-left: 1rem;
      margin: 1rem 0;
      color: ${darkMode ? '#9ca3af' : '#6b7280'};
      font-style: italic;
    }
  `;

  return (
    <>
      <SettingsModal />
      <div className={`flex h-screen ${darkMode ? 'dark bg-gray-900' : 'bg-gray-50'}`}>
        <style dangerouslySetInnerHTML={{ __html: markdownStyles }} />

        {/* ì‚¬ì´ë“œë°” */}
        <div className={`${sidebarOpen ? 'w-64' : 'w-0'} transition-all duration-300 flex-shrink-0 ${darkMode ? 'bg-gray-800' : 'bg-white'} border-r ${darkMode ? 'border-gray-700' : 'border-gray-200'} overflow-hidden`}>
          <div className="p-4">
            <button
              onClick={startNewChat}
              className={`w-full flex items-center gap-2 px-4 py-3 rounded-lg ${darkMode ? 'bg-gray-700 hover:bg-gray-600 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'} transition-colors`}
            >
              <Plus size={20} />
              <span>ìƒˆ ëŒ€í™”</span>
            </button>
          </div>

          <div className="px-4 mb-4">
            <div className={`flex items-center gap-2 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-100'}`}>
              <Search size={16} className={darkMode ? 'text-gray-400' : 'text-gray-500'} />
              <input
                type="text"
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                placeholder="ëŒ€í™” ê²€ìƒ‰..."
                className={`flex-1 bg-transparent outline-none ${getFontSizeClass()} ${darkMode ? 'text-white placeholder-gray-400' : 'text-gray-700 placeholder-gray-500'}`}
              />
              {searchQuery && (
                <button
                  onClick={() => setSearchQuery('')}
                  className={`p-1 rounded hover:bg-gray-600 transition-colors`}
                >
                  <X size={14} className={darkMode ? 'text-gray-400' : 'text-gray-500'} />
                </button>
              )}
            </div>

            {/* ê²€ìƒ‰ ëª¨ë“œ ì„ íƒ */}
            {searchQuery && (
              <div className="flex gap-1 mt-2">
                {[
                  { value: 'all', label: 'ì „ì²´' },
                  { value: 'title', label: 'ì œëª©' },
                  { value: 'content', label: 'ë‚´ìš©' }
                ].map(mode => (
                  <button
                    key={mode.value}
                    onClick={() => setSearchMode(mode.value)}
                    className={`px-2 py-1 text-xs rounded transition-colors ${
                      searchMode === mode.value
                        ? darkMode ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white'
                        : darkMode ? 'bg-gray-600 text-gray-300' : 'bg-gray-200 text-gray-600'
                    }`}
                  >
                    {mode.label}
                  </button>
                ))}
              </div>
            )}
          </div>

          <div className="overflow-y-auto px-2">
            {searchQuery && filteredConversations.length === 0 && (
              <div className={`text-center py-8 px-4 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>
                <Search size={32} className="mx-auto mb-2 opacity-50" />
                <p className="text-sm">"{searchQuery}"ì— ëŒ€í•œ</p>
                <p className="text-sm">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
              </div>
            )}

            {!searchQuery && (
              <div className={`px-4 py-2 mb-2 text-xs ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>
                ğŸ’¡ íŒ: ëŒ€í™” ë‚´ìš©ì„ ê²€ìƒ‰í•˜ë ¤ë©´ ìœ„ ê²€ìƒ‰ì°½ì„ ì‚¬ìš©í•˜ì„¸ìš”
              </div>
            )}

            {filteredConversations.map(conv => (
              <button
                key={conv.id}
                onClick={() => switchConversation(conv.id)}
                className={`w-full text-left p-3 rounded-lg mb-1 transition-colors ${
                  activeConversation === conv.id
                    ? darkMode ? 'bg-gray-700' : 'bg-gray-100'
                    : darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-50'
                }`}
              >
                <div className={`font-medium ${getFontSizeClass()} ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                  {isSearching && searchMode !== 'content' ? 
                    highlightText(conv.title, searchQuery, darkMode) : 
                    conv.title
                  }
                </div>
                <div className={`${fontSize === 'large' ? 'text-sm' : 'text-xs'} ${darkMode ? 'text-gray-400' : 'text-gray-500'} truncate mt-1`}>
                  {conv.lastMessage}
                </div>
                <div className={`${fontSize === 'large' ? 'text-sm' : 'text-xs'} ${darkMode ? 'text-gray-500' : 'text-gray-400'} mt-1 flex items-center justify-between`}>
                  <span>{conv.time}</span>
                  {isSearching && searchMode !== 'title' && conv.messages?.some(msg => 
                    msg.content.toLowerCase().includes(searchQuery.toLowerCase())
                  ) && (
                    <span className={`px-1.5 py-0.5 rounded ${fontSize === 'large' ? 'text-sm' : 'text-xs'} ${darkMode ? 'bg-blue-600/20 text-blue-400' : 'bg-blue-100 text-blue-600'}`}>
                      ë‚´ìš© ì¼ì¹˜
                    </span>
                  )}
                </div>
              </button>
            ))}
          </div>
        </div>

        {/* ë©”ì¸ ì±„íŒ… ì˜ì—­ */}
        <div className="flex-1 flex flex-col">
          {/* í—¤ë” */}
          <div className={`flex items-center justify-between px-6 py-4 border-b ${darkMode ? 'border-gray-700 bg-gray-800' : 'border-gray-200 bg-white'}`}>
            <div className="flex items-center gap-4">
              <button
                onClick={() => setSidebarOpen(!sidebarOpen)}
                className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
              >
                <Menu size={20} className={darkMode ? 'text-white' : 'text-gray-700'} />
              </button>
              <h1 className={`text-lg font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                {conversations.find(c => c.id === activeConversation)?.title || 'Claude UI í´ë¡ '}
                {isSearching && (
                  <span className={`ml-2 text-sm font-normal ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>
                    (ê²€ìƒ‰ ì¤‘)
                  </span>
                )}
              </h1>
            </div>

            <div className="flex items-center gap-2">
              <button
                onClick={() => setDarkMode(!darkMode)}
                className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
              >
                {darkMode ? <Sun size={20} className="text-white" /> : <Moon size={20} className="text-gray-700" />}
              </button>
              <button
                onClick={() => setShowSettings(true)}
                className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
              >
                <Settings size={20} className={darkMode ? 'text-white' : 'text-gray-700'} />
              </button>
              <button
                onClick={() => setArtifactOpen(!artifactOpen)}
                className={`p-2 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
              >
                <Code size={20} className={darkMode ? 'text-white' : 'text-gray-700'} />
              </button>
            </div>
          </div>

          {/* ë©”ì‹œì§€ ì˜ì—­ */}
          <div className="flex-1 overflow-y-auto px-4 py-6">
            <div className="max-w-3xl mx-auto">
              {messages.map(message => (
                <div key={message.id} className={`mb-6 flex ${message.role === MessageRole.USER ? 'justify-end' : 'justify-start'}`}>
                  <div className={`max-w-[80%] ${message.role === MessageRole.USER ? 'order-2' : ''}`}>
                    <div className="flex items-start gap-3">
                      <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${
                        message.role === MessageRole.USER 
                          ? darkMode ? 'bg-blue-600' : 'bg-blue-500'
                          : darkMode ? 'bg-purple-600' : 'bg-purple-500'
                      }`}>
                        <span className="text-white text-sm font-medium">
                          {message.role === MessageRole.USER ? 'U' : 'A'}
                        </span>
                      </div>

                      <div className="flex-1">
                        <div className={`rounded-lg px-4 py-3 ${
                          message.role === MessageRole.USER
                            ? darkMode ? 'bg-blue-900/30 text-white' : 'bg-blue-50 text-gray-900'
                            : darkMode ? 'bg-gray-700 text-white' : 'bg-white text-gray-900 shadow-sm'
                        }`}>
                          <div className={`${getFontSizeClass()} leading-relaxed`}>
                            <MarkdownRenderer 
                              content={message.content} 
                              darkMode={darkMode} 
                              searchQuery={searchQuery}
                              isSearching={isSearching}
                            />
                          </div>

                          {/* ì²¨ë¶€ íŒŒì¼ í‘œì‹œ */}
                          {message.files && message.files.length > 0 && (
                            <div className="mt-3 space-y-2">
                              {message.files.map((file, index) => (
                                <div key={index} className={`flex items-center gap-2 p-2 rounded ${darkMode ? 'bg-gray-600' : 'bg-gray-100'}`}>
                                  {file.preview ? (
                                    <img src={file.preview} alt={file.name} className="w-16 h-16 object-cover rounded" />
                                  ) : (
                                    <div className={`p-2 rounded ${darkMode ? 'bg-gray-700' : 'bg-gray-200'}`}>
                                      {React.createElement(getFileIcon(file.type), { size: 20, className: darkMode ? 'text-gray-300' : 'text-gray-600' })}
                                    </div>
                                  )}
                                  <div className="flex-1 min-w-0">
                                    <p className={`text-xs font-medium truncate ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>
                                      {file.name}
                                    </p>
                                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>
                                      {formatFileSize(file.size)}
                                    </p>
                                  </div>
                                </div>
                              ))}
                            </div>
                          )}
                        </div>

                        {message.role === MessageRole.ASSISTANT && (
                          <div className="flex items-center gap-2 mt-2 px-1">
                            <button
                              onClick={() => handleCopy(message.content, message.id)}
                              className={`p-1.5 rounded ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'} transition-colors`}
                            >
                              {copiedId === message.id ? 
                                <Check size={14} className="text-green-500" /> : 
                                <Copy size={14} className={darkMode ? 'text-gray-400' : 'text-gray-500'} />
                              }
                            </button>
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              ))}

              {isTyping && (
                <div className="flex items-center gap-3 mb-6">
                  <div className={`w-8 h-8 rounded-full flex items-center justify-center ${darkMode ? 'bg-purple-600' : 'bg-purple-500'}`}>
                    <span className="text-white text-sm font-medium">A</span>
                  </div>
                  <div className={`px-4 py-3 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-white shadow-sm'}`}>
                    <div className="flex gap-1">
                      <span className={`w-2 h-2 rounded-full ${darkMode ? 'bg-gray-400' : 'bg-gray-500'} animate-bounce`} style={{animationDelay: '0ms'}}></span>
                      <span className={`w-2 h-2 rounded-full ${darkMode ? 'bg-gray-400' : 'bg-gray-500'} animate-bounce`} style={{animationDelay: '150ms'}}></span>
                      <span className={`w-2 h-2 rounded-full ${darkMode ? 'bg-gray-400' : 'bg-gray-500'} animate-bounce`} style={{animationDelay: '300ms'}}></span>
                    </div>
                  </div>
                </div>
              )}

              <div ref={messagesEndRef} />
            </div>
          </div>

          {/* ì…ë ¥ ì˜ì—­ */}
          <div 
            className={`relative border-t ${darkMode ? 'border-gray-700 bg-gray-800' : 'border-gray-200 bg-white'} px-4 py-4`}
            onDragOver={handleDragOver}
            onDragLeave={handleDragLeave}
            onDrop={handleDrop}
          >
            <div className="max-w-3xl mx-auto">
              {/* ë“œë˜ê·¸ ì˜¤ë²„ë ˆì´ */}
              {isDragging && (
                <div className="absolute inset-0 z-50 flex items-center justify-center pointer-events-none">
                  <div className={`p-8 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-white'} shadow-lg border-2 border-dashed ${darkMode ? 'border-gray-500' : 'border-gray-300'}`}>
                    <Paperclip size={48} className={`${darkMode ? 'text-gray-300' : 'text-gray-600'} animate-bounce`} />
                    <p className={`mt-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'} font-medium`}>íŒŒì¼ì„ ì—¬ê¸°ì— ë†“ìœ¼ì„¸ìš”</p>
                  </div>
                </div>
              )}

              {/* ì²¨ë¶€ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° */}
              {attachedFiles.length > 0 && (
                <div className="mb-3 flex flex-wrap gap-2">
                  {attachedFiles.map(fileItem => (
                    <div key={fileItem.id} className={`relative group flex items-center gap-2 px-3 py-2 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-100'}`}>
                      {fileItem.preview ? (
                        <img src={fileItem.preview} alt={fileItem.file.name} className="w-10 h-10 object-cover rounded" />
                      ) : (
                        React.createElement(getFileIcon(fileItem.file.type), { size: 16, className: darkMode ? 'text-gray-400' : 'text-gray-600' })
                      )}
                      <span className={`text-xs ${darkMode ? 'text-gray-300' : 'text-gray-700'} max-w-[100px] truncate`}>
                        {fileItem.file.name}
                      </span>
                      <button
                        onClick={() => removeFile(fileItem.id)}
                        className={`ml-1 p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity ${darkMode ? 'hover:bg-gray-600' : 'hover:bg-gray-200'}`}
                      >
                        <X size={14} className={darkMode ? 'text-gray-400' : 'text-gray-600'} />
                      </button>
                    </div>
                  ))}
                </div>
              )}

              <div className={`flex items-end gap-2 px-4 py-3 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-100'}`}>
                <input
                  ref={fileInputRef}
                  type="file"
                  multiple
                  onChange={handleFileSelect}
                  className="hidden"
                  accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.txt"
                />

                <button 
                  onClick={() => fileInputRef.current?.click()}
                  className={`p-2 ${darkMode ? 'hover:bg-gray-600' : 'hover:bg-gray-200'} rounded-lg transition-colors`}
                >
                  <Paperclip size={20} className={darkMode ? 'text-gray-400' : 'text-gray-500'} />
                </button>

                <textarea
                  ref={textareaRef}
                  value={inputValue}
                  onChange={(e) => setInputValue(e.target.value)}
                  onKeyDown={(e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                      e.preventDefault();
                      handleSend();
                    }
                  }}
                  placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                  className={`flex-1 resize-none outline-none bg-transparent ${darkMode ? 'text-white placeholder-gray-400' : 'text-gray-900 placeholder-gray-500'} ${getFontSizeClass()}`}
                  rows="1"
                  style={{ maxHeight: '200px' }}
                />

                <button
                  onClick={handleSend}
                  disabled={!inputValue.trim() && attachedFiles.length === 0}
                  className={`p-2 rounded-lg transition-colors ${
                    (inputValue.trim() || attachedFiles.length > 0)
                      ? darkMode ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-blue-500 hover:bg-blue-600 text-white'
                      : darkMode ? 'bg-gray-600 text-gray-400' : 'bg-gray-300 text-gray-400'
                  }`}
                >
                  <Send size={20} />
                </button>
              </div>

              <div className={`text-xs ${darkMode ? 'text-gray-500' : 'text-gray-400'} text-center mt-2`}>
                Dr. Chenì´ ë„ì™€ë“œë¦½ë‹ˆë‹¤. Shift+Enterë¡œ ì¤„ë°”ê¿ˆ, Enterë¡œ ì „ì†¡ | íŒŒì¼ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê°€ëŠ¥ (ìµœëŒ€ 10MB)
              </div>
            </div>
          </div>
        </div>

        {/* ì•„í‹°íŒ©íŠ¸ íŒ¨ë„ */}
        <div className={`${artifactOpen ? 'w-96' : 'w-0'} transition-all duration-300 flex-shrink-0 ${darkMode ? 'bg-gray-800' : 'bg-white'} border-l ${darkMode ? 'border-gray-700' : 'border-gray-200'} overflow-hidden`}>
          <div className="p-4">
            <div className="flex items-center justify-between mb-4">
              <h2 className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>ì•„í‹°íŒ©íŠ¸</h2>
              <button
                onClick={() => setArtifactOpen(false)}
                className={`p-1.5 rounded-lg ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'}`}
              >
                <X size={18} className={darkMode ? 'text-gray-400' : 'text-gray-500'} />
              </button>
            </div>

            <div className={`rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-100'} p-4`}>
              <div className="flex items-center gap-2 mb-3">
                <FileText size={16} className={darkMode ? 'text-gray-400' : 'text-gray-500'} />
                <span className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                  Claude UI êµ¬í˜„.tsx
                </span>
              </div>

              <div className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} font-mono`}>
                <div>// Claude ìŠ¤íƒ€ì¼ UI í´ë¡ </div>
                <div>// - 3ë‹¨ ë ˆì´ì•„ì›ƒ</div>
                <div>// - ë‹¤í¬ëª¨ë“œ ì§€ì›</div>
                <div>// - ë°˜ì‘í˜• ë””ìì¸</div>
                <div>// - íƒ€ì´í•‘ ì• ë‹ˆë©”ì´ì…˜</div>
                <div>// - ë§ˆí¬ë‹¤ìš´ ë Œë”ë§</div>
                <div>// - ì½”ë“œ í•˜ì´ë¼ì´íŒ…</div>
                <div>// - íŒŒì¼ ì—…ë¡œë“œ & ë“œë˜ê·¸ ì•¤ ë“œë¡­</div>
                <div>// - íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°</div>
                <div>// - ëŒ€í™” ë‚´ìš© ê²€ìƒ‰</div>
                <div>// - ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ…</div>
                <div>// - ì„¤ì • ë©”ë‰´</div>
              </div>
            </div>

            <div className={`mt-4 p-4 rounded-lg ${darkMode ? 'bg-gray-900' : 'bg-blue-50'}`}>
              <h3 className={`text-sm font-medium mb-2 ${darkMode ? 'text-white' : 'text-gray-900'}`}>
                êµ¬í˜„ëœ ê¸°ëŠ¥
              </h3>
              <ul className={`text-xs space-y-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
                <li>âœ“ ëŒ€í™” ëª©ë¡ ê´€ë¦¬</li>
                <li>âœ“ ë©”ì‹œì§€ ì „ì†¡/í‘œì‹œ</li>
                <li>âœ“ ë‹¤í¬ëª¨ë“œ í† ê¸€</li>
                <li>âœ“ ìë™ ìŠ¤í¬ë¡¤</li>
                <li>âœ“ ë°˜ì‘í˜• í…ìŠ¤íŠ¸ ì…ë ¥</li>
                <li>âœ“ ë©”ì‹œì§€ ë³µì‚¬</li>
                <li>âœ“ íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°</li>
                <li>âœ“ ë§ˆí¬ë‹¤ìš´ ë Œë”ë§</li>
                <li>âœ“ ì½”ë“œ ë¸”ë¡ í•˜ì´ë¼ì´íŒ…</li>
                <li>âœ“ íŒŒì¼ ì—…ë¡œë“œ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)</li>
                <li>âœ“ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°</li>
                <li>âœ“ ëŒ€í™” ë‚´ìš© ê²€ìƒ‰</li>
                <li>âœ“ ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ…</li>
                <li>âœ“ ê²€ìƒ‰ ëª¨ë“œ (ì „ì²´/ì œëª©/ë‚´ìš©)</li>
                <li>âœ“ ì„¤ì • ë©”ë‰´ (í°íŠ¸, ì‚­ì œ, ì´ˆê¸°í™”)</li>
              </ul>
            </div>

            {searchQuery && (
              <div className={`mt-4 p-4 rounded-lg ${darkMode ? 'bg-purple-900/20' : 'bg-purple-50'} border ${darkMode ? 'border-purple-700' : 'border-purple-200'}`}>
                <h3 className={`text-sm font-medium mb-2 ${darkMode ? 'text-purple-300' : 'text-purple-900'} flex items-center gap-2`}>
                  <Search size={16} />
                  ê²€ìƒ‰ ì¤‘: "{searchQuery}"
                </h3>
                <p className={`text-xs ${darkMode ? 'text-purple-400' : 'text-purple-700'}`}>
                  {filteredConversations.length}ê°œì˜ ëŒ€í™”ì—ì„œ ì¼ì¹˜í•˜ëŠ” ë‚´ìš©ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.
                </p>
              </div>
            )}
          </div>
        </div>
      </div>
    </>
  );
};

export default ChatInterface;