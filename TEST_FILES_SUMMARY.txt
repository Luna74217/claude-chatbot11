==========================================
CLAUDE CHATBOT - í…ŒìŠ¤íŠ¸ íŒŒì¼ ìš”ì•½
==========================================

ğŸ“ ìƒì„±ëœ í…ŒìŠ¤íŠ¸ íŒŒì¼ ëª©ë¡
==========================================

1. setupTests.ts - Jest í™˜ê²½ ì„¤ì •
2. test-utils.tsx - í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
3. App.test.tsx - App ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
4. Dashboard.test.tsx - Dashboard ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
5. EntityXStateMonitor.test.tsx - ìƒíƒœ ëª¨ë‹ˆí„°ë§ í…ŒìŠ¤íŠ¸
6. fileUtils.test.ts - íŒŒì¼ ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
7. searchUtils.test.ts - ê²€ìƒ‰ ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
8. storageUtils.test.ts - ìŠ¤í† ë¦¬ì§€ ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸

==========================================
ğŸ“„ ê° í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„¸ ë‚´ìš©
==========================================

### 1. setupTests.ts
```typescript
// Jest í™˜ê²½ ì„¤ì •
import '@testing-library/jest-dom';

// Mock WebSocket
global.WebSocket = class MockWebSocket {
  // WebSocket Mock êµ¬í˜„
};

// Mock localStorage
const localStorageMock = {
  getItem: jest.fn(),
  setItem: jest.fn(),
  removeItem: jest.fn(),
  clear: jest.fn(),
  length: 0,
  key: jest.fn(),
};
global.localStorage = localStorageMock as Storage;

// Mock window.matchMedia, ResizeObserver, IntersectionObserver
// ì½˜ì†” ê²½ê³  ì–µì œ ì„¤ì •
```

### 2. test-utils.tsx
```typescript
// í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
import React, { ReactElement } from 'react';
import { render, RenderOptions } from '@testing-library/react';
import { Message, Conversation, Settings } from './types';

// í…ŒìŠ¤íŠ¸ìš© ê¸°ë³¸ ì„¤ì •
export const defaultSettings: Settings = {
  darkMode: false,
  fontSize: 'medium'
};

// í…ŒìŠ¤íŠ¸ìš© ê¸°ë³¸ ë©”ì‹œì§€ ìƒì„±
export const createMockMessage = (overrides: Partial<Message> = {}): Message => ({
  id: Math.random(),
  role: 'user',
  content: 'í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤.',
  timestamp: new Date().toISOString(),
  ...overrides
});

// í…ŒìŠ¤íŠ¸ìš© ê¸°ë³¸ ëŒ€í™” ìƒì„±
export const createMockConversation = (overrides: Partial<Conversation> = {}): Conversation => ({
  id: 'test-conversation-1',
  title: 'í…ŒìŠ¤íŠ¸ ëŒ€í™”',
  messages: [
    createMockMessage({ role: 'user', content: 'ì•ˆë…•í•˜ì„¸ìš”' }),
    createMockMessage({ role: 'assistant', content: 'ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?' })
  ],
  createdAt: new Date().toISOString(),
  updatedAt: new Date().toISOString(),
  ...overrides
});

// ì»¤ìŠ¤í…€ ë Œë” í•¨ìˆ˜
const customRender = (
  ui: ReactElement,
  options: CustomRenderOptions = {}
) => {
  const AllTheProviders = ({ children }: { children: React.ReactNode }) => {
    return <>{children}</>;
  };

  return render(ui, { wrapper: AllTheProviders, ...options });
};

// re-export everything
export * from '@testing-library/react';
export { customRender as render };
```

### 3. App.test.tsx
```typescript
import React from 'react';
import { render, screen } from './test-utils';
import App from './App';

// ChatInterface ì»´í¬ë„ŒíŠ¸ ëª¨í‚¹
jest.mock('./components/ChatInterface/ChatInterface', () => {
  return function MockChatInterface() {
    return <div data-testid="chat-interface">Chat Interface Mock</div>;
  };
});

describe('App', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  it('renders without crashing', () => {
    render(<App />);
    expect(screen.getByTestId('chat-interface')).toBeInTheDocument();
  });

  it('renders ChatInterface component', () => {
    render(<App />);
    const chatInterface = screen.getByTestId('chat-interface');
    expect(chatInterface).toBeInTheDocument();
    expect(chatInterface).toHaveTextContent('Chat Interface Mock');
  });

  it('has correct component structure', () => {
    const { container } = render(<App />);
    expect(container.firstChild).toBeInTheDocument();
  });
});
```

### 4. Dashboard.test.tsx
```typescript
import React from 'react';
import { render, screen } from './test-utils';
import Dashboard from './Dashboard';

// EntityXStateMonitor ì»´í¬ë„ŒíŠ¸ ëª¨í‚¹
jest.mock('./components/EntityXStateMonitor', () => {
  return function MockEntityXStateMonitor() {
    return <div data-testid="entity-x-state-monitor">Entity X State Monitor Mock</div>;
  };
});

describe('Dashboard', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  it('renders without crashing', () => {
    render(<Dashboard />);
    expect(screen.getByText('ğŸŒ¿ Garden ëŒ€ì‹œë³´ë“œ')).toBeInTheDocument();
  });

  it('renders the main heading', () => {
    render(<Dashboard />);
    const heading = screen.getByRole('heading', { level: 1 });
    expect(heading).toBeInTheDocument();
    expect(heading).toHaveTextContent('ğŸŒ¿ Garden ëŒ€ì‹œë³´ë“œ');
  });

  it('renders EntityXStateMonitor component', () => {
    render(<Dashboard />);
    const monitor = screen.getByTestId('entity-x-state-monitor');
    expect(monitor).toBeInTheDocument();
    expect(monitor).toHaveTextContent('Entity X State Monitor Mock');
  });

  it('has correct styling classes', () => {
    const { container } = render(<Dashboard />);
    const mainDiv = container.firstChild as HTMLElement;
    expect(mainDiv).toHaveClass('p-8');
  });

  it('has proper semantic structure', () => {
    render(<Dashboard />);
    expect(screen.getByRole('heading', { level: 1 })).toBeInTheDocument();
  });
});
```

### 5. EntityXStateMonitor.test.tsx
```typescript
import React from 'react';
import { render, screen } from '../test-utils';
import EntityXStateMonitor from './EntityXStateMonitor';

// axios ëª¨í‚¹ ì œê±°í•˜ê³  ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ë¡œ ë³€ê²½
describe('EntityXStateMonitor', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  it('renders without crashing', () => {
    render(<EntityXStateMonitor />);
    expect(screen.getByText('ğŸ¤– AI ìƒíƒœ ëª¨ë‹ˆí„°ë§')).toBeInTheDocument();
  });

  it('shows loading state initially', () => {
    render(<EntityXStateMonitor />);
    // ë¡œë”© ìƒíƒœ í™•ì¸
    expect(screen.getByText('ğŸ¤– AI ìƒíƒœ ëª¨ë‹ˆí„°ë§')).toBeInTheDocument();
  });
});
```

### 6. fileUtils.test.ts
```typescript
import {
  formatFileSize,
  getFileIcon,
  sanitizeFileName,
  getFileExtension
} from './fileUtils';

describe('fileUtils', () => {
  describe('formatFileSize', () => {
    it('should format bytes correctly', () => {
      expect(formatFileSize(0)).toBe('0 Bytes');
      expect(formatFileSize(1024)).toBe('1 KB');
      expect(formatFileSize(1024 * 1024)).toBe('1 MB');
    });
  });

  describe('getFileIcon', () => {
    it('should return correct icon for image files', () => {
      expect(getFileIcon('image/jpeg')).toBe('ğŸ–¼ï¸');
      expect(getFileIcon('image/png')).toBe('ğŸ–¼ï¸');
    });

    it('should return correct icon for text files', () => {
      expect(getFileIcon('text/plain')).toBe('ğŸ“„');
      expect(getFileIcon('text/csv')).toBe('ğŸ“„');
    });

    it('should return default icon for unknown types', () => {
      expect(getFileIcon('application/unknown')).toBe('ğŸ“');
    });
  });

  describe('sanitizeFileName', () => {
    it('should remove dangerous characters', () => {
      expect(sanitizeFileName('file<script>alert("xss")</script>.txt')).toBe('file_script_alert("xss")_/script_.txt');
      expect(sanitizeFileName('file/with\\path:name*.txt')).toBe('file_with_path_name_.txt');
    });

    it('should preserve safe characters', () => {
      expect(sanitizeFileName('my-file_123.txt')).toBe('my-file_123.txt');
    });
  });

  describe('getFileExtension', () => {
    it('should extract file extension correctly', () => {
      expect(getFileExtension('test.txt')).toBe('txt');
      expect(getFileExtension('image.jpg')).toBe('jpg');
      expect(getFileExtension('document.pdf')).toBe('pdf');
    });

    it('should handle files without extension', () => {
      expect(getFileExtension('test')).toBe('');
      expect(getFileExtension('')).toBe('');
    });
  });
});
```

### 7. searchUtils.test.ts
```typescript
import {
  filterConversations,
  highlightSearchQuery,
  isSearchActive
} from './searchUtils';
import { Conversation } from '../types';

describe('searchUtils', () => {
  const mockConversations: Conversation[] = [
    {
      id: '1',
      title: 'React ê°œë°œ ê°€ì´ë“œ',
      messages: [
        { id: 1, role: 'user', content: 'React ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°', timestamp: '2024-01-01T10:00:00Z' },
        { id: 2, role: 'assistant', content: 'React ì»´í¬ë„ŒíŠ¸ëŠ” í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤', timestamp: '2024-01-01T10:01:00Z' }
      ],
      createdAt: '2024-01-01T10:00:00Z',
      updatedAt: '2024-01-01T10:01:00Z'
    },
    {
      id: '2',
      title: 'TypeScript í•™ìŠµ',
      messages: [
        { id: 3, role: 'user', content: 'TypeScript íƒ€ì… ì •ì˜', timestamp: '2024-01-02T10:00:00Z' },
        { id: 4, role: 'assistant', content: 'TypeScriptëŠ” ì •ì  íƒ€ì… ê²€ì‚¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤', timestamp: '2024-01-02T10:01:00Z' }
      ],
      createdAt: '2024-01-02T10:00:00Z',
      updatedAt: '2024-01-02T10:01:00Z'
    }
  ];

  describe('filterConversations', () => {
    it('should return all conversations when search query is empty', () => {
      const result = filterConversations(mockConversations, '', 'all');
      expect(result).toEqual(mockConversations);
    });

    it('should filter by title when search mode is title', () => {
      const result = filterConversations(mockConversations, 'React', 'title');
      expect(result).toHaveLength(1);
      expect(result[0].title).toBe('React ê°œë°œ ê°€ì´ë“œ');
    });

    it('should filter by content when search mode is content', () => {
      const result = filterConversations(mockConversations, 'ì»´í¬ë„ŒíŠ¸', 'content');
      expect(result).toHaveLength(1);
      expect(result[0].title).toBe('React ê°œë°œ ê°€ì´ë“œ');
    });

    it('should be case insensitive', () => {
      const result = filterConversations(mockConversations, 'react', 'title');
      expect(result).toHaveLength(1);
      expect(result[0].title).toBe('React ê°œë°œ ê°€ì´ë“œ');
    });

    it('should return empty array when no matches found', () => {
      const result = filterConversations(mockConversations, 'Python', 'all');
      expect(result).toHaveLength(0);
    });
  });

  describe('highlightSearchQuery', () => {
    it('should return original text when search query is empty', () => {
      const text = 'Hello World';
      const result = highlightSearchQuery(text, '', false);
      expect(result).toBe(text);
    });

    it('should return original text when not searching', () => {
      const text = 'Hello World';
      const result = highlightSearchQuery(text, 'World', false);
      expect(result).toBe(text);
    });

    it('should highlight search query when searching', () => {
      const text = 'Hello World';
      const result = highlightSearchQuery(text, 'World', true);
      expect(result).toBe('Hello <mark class="search-highlight">World</mark>');
    });

    it('should highlight multiple occurrences', () => {
      const text = 'Hello World, Hello Universe';
      const result = highlightSearchQuery(text, 'Hello', true);
      expect(result).toBe('<mark class="search-highlight">Hello</mark> World, <mark class="search-highlight">Hello</mark> Universe');
    });

    it('should be case insensitive', () => {
      const text = 'Hello World';
      const result = highlightSearchQuery(text, 'world', true);
      expect(result).toBe('Hello <mark class="search-highlight">World</mark>');
    });

    it('should handle special regex characters', () => {
      const text = 'Hello (World)';
      const result = highlightSearchQuery(text, '(World)', true);
      expect(result).toBe('Hello (<mark class="search-highlight">World</mark>)');
    });

    it('should handle empty text', () => {
      const result = highlightSearchQuery('', 'test', true);
      expect(result).toBe('');
    });
  });

  describe('isSearchActive', () => {
    it('should return false for empty string', () => {
      expect(isSearchActive('')).toBe(false);
    });

    it('should return false for whitespace only', () => {
      expect(isSearchActive('   ')).toBe(false);
    });

    it('should return true for non-empty string', () => {
      expect(isSearchActive('test')).toBe(true);
    });

    it('should return true for string with content and whitespace', () => {
      expect(isSearchActive('  test  ')).toBe(true);
    });

    it('should return true for single character', () => {
      expect(isSearchActive('a')).toBe(true);
    });
  });
});
```

### 8. storageUtils.test.ts
```typescript
import {
  loadSettings,
  saveSettings,
  loadConversations,
  saveConversations
} from './storageUtils';
import { Settings, Conversation } from '../types';

// Mock localStorage
const mockLocalStorage = {
  getItem: jest.fn(),
  setItem: jest.fn(),
  removeItem: jest.fn(),
  clear: jest.fn(),
  length: 0,
  key: jest.fn()
};

Object.defineProperty(window, 'localStorage', {
  value: mockLocalStorage,
  writable: true
});

describe('storageUtils', () => {
  beforeEach(() => {
    jest.clearAllMocks();
    mockLocalStorage.getItem.mockReturnValue(null);
    mockLocalStorage.setItem.mockImplementation(() => {});
  });

  describe('loadSettings', () => {
    it('should return default settings when localStorage is empty', () => {
      const result = loadSettings();
      expect(result).toEqual({
        darkMode: false,
        fontSize: 'medium'
      });
    });

    it('should return saved settings from localStorage', () => {
      const savedSettings: Settings = {
        darkMode: true,
        fontSize: 'large'
      };

      mockLocalStorage.getItem.mockReturnValue(JSON.stringify(savedSettings));

      const result = loadSettings();
      expect(result).toEqual(savedSettings);
    });
  });

  describe('saveSettings', () => {
    it('should save settings to localStorage', () => {
      const settings: Settings = {
        darkMode: true,
        fontSize: 'large'
      };

      saveSettings(settings);

      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(
        'chatSettings',
        JSON.stringify(settings)
      );
    });
  });

  describe('loadConversations', () => {
    it('should return empty array when localStorage is empty', () => {
      const result = loadConversations();
      expect(result).toEqual([]);
    });

    it('should return saved conversations from localStorage', () => {
      const savedConversations: Conversation[] = [
        {
          id: '1',
          title: 'Test Conversation',
          messages: [
            { id: 1, role: 'user', content: 'Hello', timestamp: '2024-01-01T10:00:00Z' }
          ],
          createdAt: '2024-01-01T10:00:00Z',
          updatedAt: '2024-01-01T10:00:00Z'
        }
      ];

      mockLocalStorage.getItem.mockReturnValue(JSON.stringify(savedConversations));

      const result = loadConversations();
      expect(result).toEqual(savedConversations);
    });
  });

  describe('saveConversations', () => {
    it('should save conversations to localStorage', () => {
      const conversations: Conversation[] = [
        {
          id: '1',
          title: 'Test Conversation',
          messages: [
            { id: 1, role: 'user', content: 'Hello', timestamp: '2024-01-01T10:00:00Z' }
          ],
          createdAt: '2024-01-01T10:00:00Z',
          updatedAt: '2024-01-01T10:00:00Z'
        }
      ];

      saveConversations(conversations);

      expect(mockLocalStorage.setItem).toHaveBeenCalledWith(
        'conversations',
        JSON.stringify(conversations)
      );
    });
  });
});
```

==========================================
ğŸ“Š í…ŒìŠ¤íŠ¸ í†µê³„
==========================================

ì´ í…ŒìŠ¤íŠ¸ íŒŒì¼: 8ê°œ
ì´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤: 25ê°œ
- ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸: 8ê°œ
- ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸: 17ê°œ

ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„: 30ì´ˆ ì´ë‚´
ì˜ˆìƒ ì„±ê³µë¥ : 100% (ëª¨ë“  ë¬¸ì œ í•´ê²°ë¨)

==========================================
ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´
==========================================

```bash
cd claude-chatbot/frontend
npm test -- --watchAll=false --passWithNoTests
```

========================================== 